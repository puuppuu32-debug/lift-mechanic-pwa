<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠–ª–µ–∫—Ç—Ä–æ–º–µ—Ö–∞–Ω–∏–∫ –ø–æ –ª–∏—Ñ—Ç–∞–º</title>
    
    <!-- –¢–æ–ª—å–∫–æ —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ meta-—Ç–µ–≥–∏ -->
    <meta name="theme-color" content="#2c3e50">
    <meta name="description" content="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–º–µ—Ö–∞–Ω–∏–∫–æ–≤ –ø–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é –ª–∏—Ñ—Ç–æ–≤">
    
    <!-- –¢–æ–ª—å–∫–æ preconnect –±–µ–∑ preload -->
    <link rel="preconnect" href="https://www.gstatic.com">
    
    <!-- –û–±—ã—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CSS -->
    <link rel="stylesheet" href="style.css">
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ†Ô∏è</text></svg>">
    
    <!-- Firebase SDK (–æ—Å—Ç–∞–≤–ª—è–µ–º —Ä–∞–±–æ—á—É—é –≤–µ—Ä—Å–∏—é) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <h1>–≠–ª–µ–∫—Ç—Ä–æ–º–µ—Ö–∞–Ω–∏–∫</h1>
            <form id="loginForm">
                <div class="input-group">
                    <input type="email" id="username" placeholder="Email" required>
                </div>
                <div class="input-group">
                    <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                </div>
                <div class="auth-buttons">
                    <button type="submit" class="btn-primary">–í–æ–π—Ç–∏</button>
                    <button type="button" id="registerBtn" class="btn-secondary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                </div>
            </form>
            <div id="authStatus" style="margin-top: 15px; color: white; text-align: center;"></div>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="mainMenu" class="screen">
        <header class="header">
            <div>
                <h1>–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</h1>
                <small id="userEmail" style="color: #7f8c8d;"></small>
            </div>
            <button id="logoutBtn" class="btn-logout">–í—ã–π—Ç–∏</button>
        </header>
        
        <main class="menu-grid">
            <div class="menu-item" id="tasksBtn">
                <div class="menu-icon">üìã</div>
                <h3>–ó–∞–¥–∞–Ω–∏—è</h3>
                <p>–¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ –∏ –∑–∞—è–≤–∫–∏</p>
            </div>
            
            <div class="menu-item" id="literatureBtn">
                <div class="menu-icon">üìö</div>
                <h3>–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</h3>
                <p>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</p>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–¥–∞–Ω–∏–π -->
    <div id="tasksModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ú–æ–∏ –∑–∞–¥–∞–Ω–∏—è</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="tasks-filter">
                    <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
                    <button class="filter-btn" data-filter="new">–ù–æ–≤—ã–µ</button>
                    <button class="filter-btn" data-filter="in-progress">–í —Ä–∞–±–æ—Ç–µ</button>
                    <button class="filter-btn" data-filter="completed">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</button>
                    <button class="filter-btn" data-filter="rejected">–û—Ç–∫–∞–∑–∞–Ω–Ω—ã–µ</button>
                </div>
                
                <div class="tasks-list">
                    <div id="tasksLoading" style="text-align: center; color: #7f8c8d;">
                        –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞–Ω–∏–π...
                    </div>
                    <!-- –ó–∞–¥–∞–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ Firebase -->
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã -->
    <div id="literatureModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <!-- –í–∫–ª–∞–¥–∫–∏ -->
                <div class="tabs">
                    <button class="tab-btn active" data-tab="library">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</button>
                    <button class="tab-btn" data-tab="add-doc">–î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</button>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
                <div id="library-tab" class="tab-content active">
                    <div class="docs-search">
                        <input type="text" id="searchDocs" placeholder="–ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤..." class="search-input">
                    </div>
                    
                    <div class="docs-categories">
                        <div class="category-item">
                            <h3>üìñ –ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                            <ul class="docs-list">
                                <li><a href="https://www.fkr-spb.ru/upload/iblock/1c7/ppkbjcvn2htnuz1ajf9ei7rk1rfnneis.pdf" target="_blank">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ä–µ–≥–ª–∞–º–µ–Ω—Ç –¢–† –¢–° 011/2011</a></li>
                                <li><a href="http://static.government.ru/media/files/SoNVNKLZ2H2AjqKHE6vRi6UXpAazxMWp.pdf" target="_blank">–ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –†–§ –æ—Ç 24 –∏—é–Ω—è 2017 –≥. N 743</a></li>
                                <li><a href="https://protect.gost.ru/v.aspx?control=8&baseC=6&page=0&month=3&year=2023&search=–†%2055964-2014&RegNum=1&DocOnPageCount=15&id=173021&pageK=5651C111-508A-4A6A-A61E-5A2C195BC5A8" target="_blank">–ì–û–°–¢ –† 55964-2014 –õ–∏—Ñ—Ç—ã –ø–∞—Å—Å–∞–∂–∏—Ä—Å–∫–∏–µ</a></li>
                            </ul>
                        </div>
                        
                        <div class="category-item">
                            <h3>üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏</h3>
                            <ul class="docs-list">
                                <li><a href="http://etel-nt.com/wp-content/uploads/2014/02/PG-01.06.001_RU.pdf" target="_blank">KONE - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏</a></li>
                                <li><a href="https://www.lift-jkx.ru/images/files/documents/re/re-2000r-otis.pdf" target="_blank">OTIS - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è</a></li>
                                <li><a href="https://kls.ooo/wp-content/uploads/2024/01/%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F-%D0%BF%D0%BE-%D0%BE%D0%B1%D1%81%D0%BB%D1%83%D0%B6%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D1%8E-Shindler-3300-5300.pdf" target="_blank">Schindler - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a></li>
                            </ul>
                        </div>

                        <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã -->
                        <div class="category-item" id="user-docs-section">
                            <h3>üìÅ –ú–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                            <div id="syncStatus" style="margin-bottom: 15px; padding: 8px; border-radius: 5px; background: #f8f9fa; text-align: center; font-size: 14px; color: #7f8c8d;">
                                –ó–∞–≥—Ä—É–∑–∫–∞...
                            </div>
                            <ul class="docs-list" id="user-docs-list">
                                <!-- –î–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ Firebase -->
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
                <div id="add-doc-tab" class="tab-content">
                    <form id="addDocForm" class="doc-form">
                        <div class="form-group">
                            <label for="docName">–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:</label>
                            <input type="text" id="docName" required class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞">
                        </div>
                        
                        <div class="form-group">
                            <label for="docUrl">–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç:</label>
                            <input type="url" id="docUrl" required class="form-input" placeholder="https://example.com/document.pdf">
                            <small class="form-hint">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è PDF, Word, Excel –∏ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã</small>
                        </div>

                        <div class="form-group">
                            <label for="docCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                            <select id="docCategory" class="form-input">
                                <option value="user">–ú–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã</option>
                                <option value="normative">–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</option>
                                <option value="instructions">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏</option>
                                <option value="schemes">–≠–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂–Ω—ã–µ —Å—Ö–µ–º—ã</option>
                            </select>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</button>
                            <button type="button" id="clearDocsBtn" class="btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å –º–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        window.addEventListener('load', function() {
            console.log('Page loaded, initializing Firebase...');
            
            // –î–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–¥ –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
            setTimeout(() => {
                if (typeof firebase !== 'undefined') {
                    console.log('Firebase loaded, starting app...');
                    // –í—ã–∑—ã–≤–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                    if (window.initApp) {
                        window.initApp();
                    }
                } else {
                    console.error('Firebase not loaded');
                }
            }, 100);
        });

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—Ö–æ–¥–∞ —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
        window.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, showing login screen...');
            const loginScreen = document.getElementById('loginScreen');
            if (loginScreen) {
                loginScreen.classList.add('active');
            }
        });

        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    registration.unregister();
                    console.log('Service Worker unregistered');
                }
            });
            
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('Service Worker successfully registered');
                    })
                    .catch(function(error) {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
    <script src="app.js"></script>
</body>
</html>